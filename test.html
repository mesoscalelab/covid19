<!DOCTYPE html>
<html>
<head>
</head>

<body>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="js/covid19-model-india.js"></script>
<script>
let urls = [];
urls.push("https://api.covid19india.org/states_daily.json");
urls.push("https://api.covid19india.org/raw_data.json");

let promises = [];
urls.forEach(function(url) {
  promises.push(fetch(url).then(data => data.json()));
});

Promise.all(promises).then(function(data) {
  init(data);
});

function init(data)
{
  let t0 = new Date();
  t0.setDate(t0.getDate() - 7);

  let statesSeries = data[0].states_daily;
  let caseSeries   = data[1].raw_data;
  let model        = new Covid19ModelIndia(t0, statesSeries, caseSeries);

  var numCritical = model.countryStat("reported", model.lowParams, model.dates[1]);
  console.log(numCritical);
}
</script>
</body>
</html>
